<!DOCTYPE html>

<html lang="es">

<head>

&nbsp; <meta charset="UTF-8" />

&nbsp; <meta name="viewport" content="width=device-width, initial-scale=1.0" />

&nbsp; <title>Precios del Aceite de Oliva</title>

&nbsp; <meta name="color-scheme" content="light" />

&nbsp; <style>

&nbsp;   :root {

&nbsp;     --card-bg: #fff;

&nbsp;     --card-bd: #e6e6e6;

&nbsp;     --muted: #666;

&nbsp;     --pill-bg: #f5f7fb;

&nbsp;     --accent: #1f6feb;

&nbsp;     --okay: #18a957;

&nbsp;     --olive: #8a9b0f;

&nbsp;     --olive-dark: #6f7d0c;

&nbsp;   }

&nbsp;   \* { box-sizing: border-box; }

&nbsp;   body {

&nbsp;     font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

&nbsp;     margin: 0;

&nbsp;     background: #f6f8fa;

&nbsp;     color: #222;

&nbsp;   }

&nbsp;   .wrap {

&nbsp;     max-width: 1000px;

&nbsp;     margin: 40px auto;

&nbsp;     padding: 0 16px;

&nbsp;   }

&nbsp;   .card {

&nbsp;     background: var(--card-bg);

&nbsp;     border: 1px solid var(--card-bd);

&nbsp;     border-radius: 12px;

&nbsp;     padding: 24px;

&nbsp;     box-shadow: 0 10px 20px rgba(0,0,0,.04);

&nbsp;   }

&nbsp;   h1 {

&nbsp;     margin: 0 0 6px;

&nbsp;     font-size: clamp(22px, 2.9vw, 32px);

&nbsp;     display: flex;

&nbsp;     align-items: center;

&nbsp;     gap: .6rem;

&nbsp;   }

&nbsp;   h1 .dot { font-size: 28px; }

&nbsp;   .muted { color: var(--muted); margin: 0 0 24px; }



&nbsp;   /\* Campos \*/

&nbsp;   .campo { margin-bottom: 16px; }

&nbsp;   label { font-weight: 600; display: block; margin-bottom: 6px; }

&nbsp;   input\[type="number"], select {

&nbsp;     width: 100%;

&nbsp;     padding: 10px 12px;

&nbsp;     font-size: 16px;

&nbsp;     border-radius: 8px;

&nbsp;     border: 1px solid var(--card-bd);

&nbsp;     background: #fff;

&nbsp;     outline: none;

&nbsp;     transition: border .15s, box-shadow .15s;

&nbsp;   }

&nbsp;   input\[type="number"]:focus, select:focus {

&nbsp;     border-color: var(--accent);

&nbsp;     box-shadow: 0 0 0 3px rgba(31,111,235,.12);

&nbsp;   }

&nbsp;   :focus:not(:focus-visible){ outline: none; box-shadow:none; }

&nbsp;   small.ayuda { color: var(--muted); display: block; margin-top: 6px; }

&nbsp;   #precio {

&nbsp;     margin-top: 14px;

&nbsp;     font-weight: 700;

&nbsp;     padding: 10px 12px;

&nbsp;     background: var(--pill-bg);

&nbsp;     border-radius: 10px;

&nbsp;     min-height: 42px;

&nbsp;     display: flex;

&nbsp;     align-items: center;

&nbsp;   }



&nbsp;   /\* Calculadora \*/

&nbsp;   .calc {

&nbsp;     margin-top: 20px;

&nbsp;     padding: 16px;

&nbsp;     border: 1px dashed var(--card-bd);

&nbsp;     border-radius: 10px;

&nbsp;     background: #fcfefd;

&nbsp;   }

&nbsp;   .calc h2 {

&nbsp;     margin: 0 0 6px;

&nbsp;     font-size: 18px;

&nbsp;     display: flex;

&nbsp;     align-items: center;

&nbsp;     gap: 8px;

&nbsp;   }

&nbsp;   .calc h2 .emoji { font-size: 20px; }

&nbsp;   .resultado {

&nbsp;     margin-top: 10px;

&nbsp;     padding: 12px 14px;

&nbsp;     border-radius: 10px;

&nbsp;     font-weight: 700;

&nbsp;     min-height: 44px;

&nbsp;     display: flex;

&nbsp;     align-items: center;

&nbsp;     justify-content: center;

&nbsp;   }

&nbsp;   .resultado.error {

&nbsp;     background: #fff6f6;

&nbsp;     border: 1px solid #ffd1d1;

&nbsp;     color: #a40000;

&nbsp;   }



&nbsp;   /\* Nota encima de la tabla (fecha) \*/

&nbsp;   .tabla-info{

&nbsp;     margin-top:22px;

&nbsp;     margin-bottom:8px;

&nbsp;     padding:10px 12px;

&nbsp;     background:#f5f7fb;

&nbsp;     border:1px solid var(--card-bd);

&nbsp;     border-radius:10px;

&nbsp;     color:#334;

&nbsp;     font-weight:600;

&nbsp;   }



&nbsp;   /\* Tabla de precios \*/

&nbsp;   .tabla-wrap {

&nbsp;     border: 1px solid var(--card-bd);

&nbsp;     border-radius: 12px;

&nbsp;     overflow: hidden;

&nbsp;     background: #fff;

&nbsp;   }

&nbsp;   table.price-table { width: 100%; border-collapse: collapse; }

&nbsp;   .price-table thead th {

&nbsp;     background: linear-gradient(0deg, var(--olive), var(--olive-dark));

&nbsp;     color: #fff;

&nbsp;     text-align: left;

&nbsp;     padding: 14px 16px;

&nbsp;     font-weight: 700;

&nbsp;     letter-spacing: .2px;

&nbsp;   }

&nbsp;   .price-table tbody td {

&nbsp;     padding: 14px 16px;

&nbsp;     border-top: 1px solid #f0f0f0;

&nbsp;   }

&nbsp;   .price-table tbody tr:nth-child(even) { background: #fbfcf7; }

&nbsp;   .price-table .tipo { font-weight: 600; }

&nbsp;   .price-table .precio {

&nbsp;     text-align: right;

&nbsp;     font-variant-numeric: tabular-nums;

&nbsp;     font-weight: 700;

&nbsp;   }



&nbsp;   /\* Enlace ‚Äúfuente‚Äù debajo de la tabla, peque√±o e IZQUIERDA \*/

&nbsp;   .tabla-footer {

&nbsp;     margin-top: 8px;

&nbsp;     display: flex;

&nbsp;     align-items: center;

&nbsp;     justify-content: flex-start; /\* izquierda \*/

&nbsp;   }

&nbsp;   .fuente {

&nbsp;     font-size: 12px;

&nbsp;     color: #666;

&nbsp;   }

&nbsp;   .fuente a {

&nbsp;     font-size: 12px;

&nbsp;     color: #1f6feb;

&nbsp;     text-decoration: underline;

&nbsp;     cursor: pointer;

&nbsp;   }



&nbsp;   /\* Modal \*/

&nbsp;   .modal-overlay{

&nbsp;     position: fixed;

&nbsp;     inset: 0;

&nbsp;     background: rgba(0,0,0,.45);

&nbsp;     display: none;          /\* oculto por defecto \*/

&nbsp;     align-items: center;

&nbsp;     justify-content: center;

&nbsp;     z-index: 9999;

&nbsp;   }

&nbsp;   .modal-overlay.open{ display:flex; }

&nbsp;   .modal-content{

&nbsp;     background:#fff;

&nbsp;     max-width: 480px;

&nbsp;     width: 90%;

&nbsp;     border-radius: 12px;

&nbsp;     padding: 20px 18px;

&nbsp;     box-shadow: 0 15px 35px rgba(0,0,0,.25);

&nbsp;     text-align: center;

&nbsp;   }

&nbsp;   .modal-content h3{ margin: 0 0 6px; }

&nbsp;   .modal-content p { margin: 0 0 14px; color:#444; }

&nbsp;   .modal-actions{

&nbsp;     display:flex; gap:10px; justify-content:center; margin-top: 6px;

&nbsp;   }

&nbsp;   .btn{

&nbsp;     padding: 8px 12px; border-radius: 8px; border: 1px solid #d0d7de;

&nbsp;     background:#fff; cursor:pointer;

&nbsp;   }

&nbsp;   .btn.primary{

&nbsp;     background:#1f6feb; color:#fff; border-color:#1f6feb;

&nbsp;   }



&nbsp;   @media (max-width: 640px) {

&nbsp;     .price-table thead { display: none; }

&nbsp;     .price-table, .price-table tbody, .price-table tr, .price-table td { display: block; width: 100%; }

&nbsp;     .price-table tr { border-bottom: 1px solid #f0f0f0; }

&nbsp;     .price-table td { display: flex; justify-content: space-between; gap: 12px; }

&nbsp;     .price-table td::before { content: attr(data-label); color: var(--muted); font-weight: 600; }

&nbsp;     .price-table .precio { text-align: left; }

&nbsp;   }

&nbsp;   .noscript {

&nbsp;     margin-top: 12px;

&nbsp;     padding: 12px 14px;

&nbsp;     border-radius: 10px;

&nbsp;     border: 1px solid #ffe0a6;

&nbsp;     background: #fff8e6;

&nbsp;     color: #8a5a00;

&nbsp;   }

&nbsp; </style>

</head>

<body>

&nbsp; <div class="wrap">

&nbsp;   <div class="card">

&nbsp;     <!-- T√≠tulo -->

&nbsp;     <h1><span class="dot">ü´í</span>Precios del Aceite de Oliva</h1>



&nbsp;     <noscript>

&nbsp;       <div class="noscript">

&nbsp;         ‚ö†Ô∏è Para ver los datos y la calculadora necesitas activar JavaScript.

&nbsp;       </div>

&nbsp;     </noscript>



&nbsp;     <div class="campo">

&nbsp;       <label for="rendimiento">Rendimiento (%)</label>

&nbsp;       <input

&nbsp;         id="rendimiento"

&nbsp;         type="number"

&nbsp;         inputmode="decimal"

&nbsp;         min="0"

&nbsp;         max="100"

&nbsp;         step="0.1"

&nbsp;         placeholder="Ej: 20"

&nbsp;         aria-describedby="rend-help"

&nbsp;         value="20"

&nbsp;         autocomplete="off"

&nbsp;       />

&nbsp;       <small id="rend-help" class="ayuda">Introduce un n√∫mero entre 0 y 100.</small>

&nbsp;     </div>



&nbsp;     <div class="campo">

&nbsp;       <label for="tipo">Calidad del Aceite</label>

&nbsp;       <select id="tipo" autocomplete="off">

&nbsp;         <option value="">-- Elegir calidad --</option>

&nbsp;         <option value="virgen\_extra">Virgen Extra</option>

&nbsp;         <option value="virgen">Virgen</option>

&nbsp;         <option value="lampante">Lampante</option>

&nbsp;       </select>

&nbsp;     </div>



&nbsp;     <div id="precio" role="status" aria-live="polite"></div>



&nbsp;     <!-- Calculadora -->

&nbsp;     <div class="calc">

&nbsp;       <h2><span class="emoji">üßÆ</span>Calculadora ‚Äî precio por kg de aceituna</h2>

&nbsp;       <p class="muted" style="margin: 4px 0 8px;">

&nbsp;         Usa el rendimiento (%) y la calidad seleccionada para estimar el precio del kg de aceituna.

&nbsp;       </p>

&nbsp;       <div id="resultado" class="resultado" role="status" aria-live="polite"></div>

&nbsp;     </div>



&nbsp;     <!-- R√≥tulo de fecha encima de la tabla -->

&nbsp;     <div id="tabla-info" class="tabla-info">Precios actualizados ‚Äî ‚Ä¶</div>



&nbsp;     <!-- Tabla de precios -->

&nbsp;     <div id="tabla-precios" class="tabla-wrap"></div>



&nbsp;     <!-- Enlace a la fuente -->

&nbsp;     <div class="tabla-footer">

&nbsp;       <span class="fuente">

&nbsp;         <a id="fuente-link" href="#" aria-controls="fuente-modal" aria-haspopup="dialog">

&nbsp;           De d√≥nde obtenemos los precios

&nbsp;         </a>

&nbsp;       </span>

&nbsp;     </div>



&nbsp;     <!-- Gr√°fica -->

&nbsp;     <div class="calc" style="margin-top:20px;">

&nbsp;       <h2><span class="emoji">üìà</span>Gr√°fica ‚Äî evoluci√≥n √∫ltimos 24 meses</h2>

&nbsp;       <select id="grafico-tipo" style="margin-top:8px;">

&nbsp;         <option value="virgen\_extra">Virgen Extra</option>

&nbsp;         <option value="virgen">Virgen</option>

&nbsp;         <option value="lampante">Lampante</option>

&nbsp;       </select>

&nbsp;       <canvas id="grafico-precios" style="margin-top:15px;max-height:320px;"></canvas>

&nbsp;       <div id="grafico-msg" class="muted" style="margin-top:8px;">No hay datos hist√≥ricos para mostrar.</div>

&nbsp;     </div>

&nbsp;   </div>

&nbsp; </div>



&nbsp; <!-- MODAL -->

&nbsp; <div id="fuente-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title">

&nbsp;   <div class="modal-content">

&nbsp;     <h3 id="modal-title">Fuente de los precios</h3>

&nbsp;     <p>Obtenemos los datos del Observatorio de <strong>Infaoliva</strong>.</p>

&nbsp;     <div class="modal-actions">

&nbsp;       <a class="btn primary" href="https://www.infaoliva.com/" target="\_blank" rel="noopener">Ir a Infaoliva</a>

&nbsp;       <button id="modal-close" class="btn" type="button">Cerrar</button>

&nbsp;     </div>

&nbsp;   </div>

&nbsp; </div>



&nbsp; <!-- Chart.js local -->

&nbsp; <script src="chart.umd.min.js"></script>

&nbsp; <script src="app.js" defer></script>

</body>

</html>
