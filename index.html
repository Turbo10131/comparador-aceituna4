<script>
  async function cargarPrecios() {
    try {
      // üëá cache-busting para evitar JSON antiguo en CDN
      const response = await fetch('precio-aceite.json?v=' + Date.now());
      if (!response.ok) throw new Error('No se pudo cargar el JSON');
      const datos = await response.json();

      const cont = document.getElementById("contenido") || document.getElementById("precios") || document.body;
      // Si usas el formato con ‚Äúprecios‚Äù por tipo:
      let html = '';
      html += `<p><strong>√öltima actualizaci√≥n:</strong> ${new Date(datos.ultima_actualizacion || datos.fecha).toLocaleString('es-ES')}</p>`;
      if (datos.precios) {
        for (const tipo in datos.precios) {
          const info = datos.precios[tipo];
          html += `<div class="precio">${tipo} (${info.variedad}): ${Number(info.precio_eur_kg).toFixed(3)} ‚Ç¨/kg</div>`;
        }
      } else {
        html += `<div class="precio">Precio: ${Number(datos.precio).toFixed(3)} ‚Ç¨/kg</div>`;
      }
      (document.getElementById("contenido") || document.getElementById("precios")).innerHTML = html;
    } catch (e) {
      console.error(e);
      (document.getElementById("contenido") || document.getElementById("precios")).textContent = '‚ö†Ô∏è Error al cargar los precios.';
    }
  }
  cargarPrecios();
</script>
